<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/fragments :: head">
</head>
<body>
<div th:replace="fragments/fragments :: div.scripts"></div>
<script>
    function submit(){
        document.forms["filter"].submit();
    }
</script>


<div th:replace="fragments/fragments :: header"></div>

<div class="container">
    <div th:replace="fragments/fragments :: div#page-header"></div>

    <div class="row">
        <div class="col-lg-12">
            <h2>Order Car</h2>

            <h3>From Catalog:</h3>

            <div>
                <form name="filter" id="filter" method="get" th:action="@{/employees/select-car/filter}" th:object="${filterCarsDTO}">
                    <span style="font-weight:bold;">Brand: </span>
                    <input id="brand" name="brand" type="text" th:field="*{brand}" onblur="submit()"/> -
                    <span style="font-weight:bold;">Model: </span>
                    <input id="carModel" name="carModel" type="text" th:field="*{model}" onblur="submit()"/><br/>
                    <span style="font-weight:bold;">Level: </span>
                    <input name="level" id="allPossible" type="radio" th:field="*{level}" value="allPossible" onclick="submit()"/>All
                    Possible
                    <input name="level" id="downgrade" type="radio" th:field="*{level}" value="downgrade" onclick="submit()"/>Downgrade
                    <input name="level" id="myLevel" type="radio" th:field="*{level}" value="myLevel" onclick="submit()"/>My Level
                    <input name="level" id="upgrade" type="radio" th:field="*{level}" value="upgrade" onclick="submit()"/>Upgrade <br/>
                </form>
            </div>

            <hr/>

            <p th:if="${dimensionalCarList.isEmpty()}">No cars matching criteria found.</p>
            <table class="table-bordered" th:if="${!dimensionalCarList.isEmpty()}">
                <tbody>
                <tr th:each="carList  : ${dimensionalCarList}">
                    <td th:each="car : ${carList}">
                        <span th:text="${car.brand + ' ' + car.model}" style="font-weight: bold;">carTitle</span>
                        <br/>
                        <a th:href="${'/employees/selected-car-detail?id=' + car.id}">
                            <img th:src="${car.pictures[0]}" height="200" width="250" class="img-thumbnail"/>
                        </a>
                        <ul>
                            <li th:if="${car.category &lt; functionalLevelForLoggedInUser}">Downgrade</li>
                            <li th:if="${car.category &gt; functionalLevelForLoggedInUser}">Upgrade</li>
                        </ul>
                    </td>
                </tr>
                </tbody>
            </table>

            <hr/>

            <h3>From Free Pool</h3>

            <table class="table-bordered">
                <tbody>
                <tr th:each="carList  : ${dimensionalFreePoolCarList}">
                    <td th:each="carUsage : ${carList}">
                        <span th:text="${carUsage.orderedCar.car.brand + ' ' + carUsage.orderedCar.car.model}"
                              style="font-weight: bold;">carTitle</span>
                        <br/>
                        <a th:href="${'/employees/selected-free-pool-car-detail?id=' + carUsage.id}">
                        <img th:src="${carUsage.orderedCar.car.pictures[0]}" height="200" width="250"
                             class="img-thumbnail"/></a>
                        <ul>
                            <li>
                                Color: <span th:text="${carUsage.orderedCar.color}">carColor</span>
                            </li>
                            <li>
                                Current km: <span th:text="${carUsage.usageUpdates[0].newTotalKm}">carColor</span>
                            </li>
                            </ul>
                    </td>
                </tr>
                </tbody>
            </table>


        </div>
    </div>

    <hr/>
</div>


</body>
</html>